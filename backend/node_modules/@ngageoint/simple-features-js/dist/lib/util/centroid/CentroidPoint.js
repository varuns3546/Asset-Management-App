"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.CentroidPoint = void 0;
var internal_1 = require("../../internal");
/**
 * Calculate the centroid from point based geometries. Implementation based on
 * the JTS (Java Topology Suite) CentroidPoint.
 */
var CentroidPoint = /** @class */ (function () {
    /**
     * Constructor
     */
    function CentroidPoint() {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        /**
         * Point count
         */
        this._count = 0;
        /**
         * Sum of point locations
         */
        this._sum = new internal_1.Point();
        if (args.length === 1 && args[0] instanceof internal_1.Geometry) {
            this.add(args[0]);
        }
    }
    /**
     * Add a point based dimension 0 geometry to the centroid total
     * @param geometry geometry
     */
    CentroidPoint.prototype.add = function (geometry) {
        var _this = this;
        var geometryType = geometry.geometryType;
        switch (geometryType) {
            case internal_1.GeometryType.POINT:
                this.addPoint(geometry);
                break;
            case internal_1.GeometryType.MULTIPOINT:
                var multiPoint = geometry;
                multiPoint.points.forEach(function (point) { return _this.addPoint(point); });
                break;
            case internal_1.GeometryType.GEOMETRYCOLLECTION:
            case internal_1.GeometryType.MULTICURVE:
            case internal_1.GeometryType.MULTISURFACE:
                geometry.geometries.forEach(function (subGeometry) { return _this.add(subGeometry); });
                break;
            default:
                throw new internal_1.SFException("Unsupported CentroidPoint Geometry Type: " + geometryType);
        }
    };
    /**
     * Add a point to the centroid total
     * @param point point
     */
    CentroidPoint.prototype.addPoint = function (point) {
        this._count++;
        this._sum.x = this._sum.x + point.x;
        this._sum.y = this._sum.y + point.y;
    };
    /**
     * Get the centroid point
     * @return centroid point
     */
    CentroidPoint.prototype.getCentroid = function () {
        return new internal_1.Point(this._sum.x / this._count, this._sum.y / this._count);
    };
    return CentroidPoint;
}());
exports.CentroidPoint = CentroidPoint;
//# sourceMappingURL=CentroidPoint.js.map